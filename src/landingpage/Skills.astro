---
import HeaderSection from "../layouts/HeaderSection.astro";
import { skills } from "../data/util";
---

<section id="skills" class="my-8 align-middle max-w-6xl mx-auto px-5">
  <HeaderSection title="Skills" />
  <div class="overflow-hidden flex justify-center">
    <div
      class="skills-container flex flex-wrap justify-center sm:flex-nowrap sm:justify-start sm:w-max gap-4 p-4"
    >
      {
        skills.map((skill) => (
          <div
            class="skill-item w-36 h-32 bg-bg border-border border-2 rounded-lg p-4 flex flex-col
                  items-center justify-center text-text"
          >
            <span class="text-3xl mb-2">{skill.icon}</span>
            <span class="text-center text-sm font-medium">{skill.name}</span>
          </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  function animateSkills(): void {
    const skillItems = document.querySelectorAll<HTMLElement>(".skill-item");

    gsap.set(skillItems, { opacity: 0, y: 40 });

    gsap.to(skillItems, {
      opacity: 1,
      y: 0,
      duration: 0.5,
      ease: "power2.out",
      stagger: 0.1,
      scrollTrigger: {
        trigger: ".skills-container",
        start: "top 80%",
        end: "bottom 20%",
        toggleActions: "play reverse play reverse",
      },
    });
  }

  document.addEventListener("DOMContentLoaded", animateSkills);
</script>
